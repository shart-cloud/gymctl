from ubuntu:latest

RUN apt-get update && \
    apt-get install -y python3 python3-pip

WORKDIR /app

COPY app/ /app

RUN pip3 install flask==2.0.1
    pip3 install requests

EXPOSE 8080

ENV FLASK_APP=app.py
env DEBUG_MODE true

CMD python3 app.py
cmd echo "Starting server..."

USER nobody

ENTRYPOINT ["python3"]
CMD ["app.py"]

HEALTHCHECK --interval=30s --timeout=3s \
  CMD curl -f http://localhost:8080/ || exit 1

RUN chown -R nobody:nobody /app