apiVersion: apps/v1
kind: Deployment
metadata:
  name: jerry-config-app
spec:
  replicas: 2
  selector:
    matchLabels:
      app: jerry-config-app
  template:
    metadata:
      labels:
        app: jerry-config-app
    spec:
      containers:
      - name: app
        image: busybox:latest
        command: ["/bin/sh"]
        args:
          - -c
          - |
            echo "Starting Jerry's app..."
            echo "Database: $DATABASE_HOST:$DATABASE_PORT"
            echo "Mode: $APP_MODE"
            while true; do
              echo "App is running..."
              sleep 30
            done
        envFrom:
        - configMapRef:
            name: app-config  # This ConfigMap doesn't exist yet!
        resources:
          requests:
            memory: "64Mi"
            cpu: "50m"
          limits:
            memory: "128Mi"
            cpu: "100m"